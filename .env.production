# TJudge Production Configuration
# IMPORTANT: DO NOT commit this file with real secrets!
# This is a template - copy and fill with actual values

# Environment
ENVIRONMENT=production

# API Server
API_PORT=8080
READ_TIMEOUT=30s
WRITE_TIMEOUT=30s
SHUTDOWN_TIMEOUT=10s

# Database (PostgreSQL)
# Оптимизированные настройки для production
DB_HOST=postgres
DB_PORT=5432
DB_USER=tjudge
DB_PASSWORD=CHANGE_ME_IN_PRODUCTION
DB_NAME=tjudge
# Connection pool optimization (для высокой нагрузки)
DB_MAX_CONNECTIONS=200        # Максимум открытых соединений
DB_MAX_IDLE=50                # Idle соединения (25% от max)
DB_MAX_LIFETIME=30m           # Lifetime соединения (предотвращает утечки)

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION
REDIS_DB=0
REDIS_POOL_SIZE=200

# Worker Pool
WORKER_MIN=20
WORKER_MAX=2000
WORKER_QUEUE_SIZE=20000
WORKER_TIMEOUT=60s
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=10s

# Match Executor
TJUDGE_PATH=/usr/local/bin/tjudge-cli
EXECUTOR_TIMEOUT=60s
EXECUTOR_CPU_QUOTA=100000
EXECUTOR_MEMORY_LIMIT=536870912
EXECUTOR_PIDS_LIMIT=100
EXECUTOR_NETWORK_DISABLED=true

# JWT Authentication
JWT_SECRET=CHANGE_ME_TO_STRONG_RANDOM_SECRET_IN_PRODUCTION
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=168h

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_ASYNC=true

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# CORS
CORS_ALLOWED_ORIGINS=https://yourdomain.com
CORS_MAX_AGE=3600

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPM=1000
RATE_LIMIT_BURST=2000
